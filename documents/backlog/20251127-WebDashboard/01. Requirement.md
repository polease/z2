# Web Dashboard for Z2 AI Knowledge Distillery Platform

## Feature Request
Create a web-based dashboard to manage and monitor the YouTube video processing pipeline.

## User Story
As a user of the Z2 platform, I want a web interface where I can:
- Input YouTube URLs to process
- Track the running status of pipeline jobs
- View processing history
- Monitor job progress in real-time
- See job results and any errors

## Initial Requirements (Draft)

### 1. URL Input Interface
- **Input Field**: Text input for YouTube URL
- **Validation**: Validate YouTube URL format before submission
- **Submit Button**: Trigger pipeline execution
- **Response**: Show confirmation and job ID after submission

### 2. Job Status Tracking
- **Real-time Status**: Display current status of running jobs
  - Pending
  - Downloading video
  - Transcribing
  - Translating
  - Burning subtitles
  - Publishing
  - Completed
  - Failed
- **Progress Indicator**: Visual progress bar or percentage
- **Active Jobs List**: Show all currently running jobs

### 3. Job History
- **Historical Records**: List of all past pipeline executions
- **Details for Each Job**:
  - Video ID
  - YouTube URL
  - Video title
  - Submission timestamp
  - Completion timestamp
  - Final status (success/failed)
  - Duration
- **Filtering**: Filter by status, date range
- **Sorting**: Sort by date, status, duration

### 4. Job Details View
- **Metadata Display**:
  - Video information (title, channel, duration, views)
  - Processing timestamps for each stage
  - Generated files (subtitles, processed video)
  - Analysis results (summary, key insights, topics)
  - Publishing status (WeChat, Bilibili)
- **Error Messages**: Show detailed error information if job failed
- **Logs**: Display processing logs for debugging

### 5. Technical Requirements (Pending Clarification)
- **Backend Framework**: ?
- **Frontend Framework**: ?
- **Database**: Store job history and status
- **Real-time Updates**: WebSocket or polling?
- **Authentication**: User login required?
- **Deployment**: Where will this be hosted?

## Technical Decisions (Confirmed)

1. **Technology Stack**:
   - Backend: **FastAPI** (async, modern, WebSocket support)
   - Frontend: **React** (SPA with real-time updates)

2. **Database**:
   - **PostgreSQL** for job tracking and history
   - Migrate from JSON files to database for better querying and concurrent access

3. **Real-time Updates**:
   - **WebSocket** for instant status updates and log streaming

4. **Job Management**:
   - ✓ Cancel running jobs
   - ✗ No retry functionality (can resubmit URL manually)
   - ✓ Stream logs to UI in real-time
   - ✓ Job queue for handling multiple concurrent requests

5. **Authentication**:
   - **Single user** for now (no authentication required in MVP)
   - Can add multi-user support later

6. **MVP Scope**:
   - ✓ URL input and job submission
   - ✓ Real-time status tracking via WebSocket
   - ✓ Job history with filtering
   - ✓ Live log streaming to UI
   - ✓ Job cancellation
   - ✓ Detailed job view (metadata, files, analysis)
   - ✗ Retry functionality (not needed)

7. **Integration**:
   - Web app will **start** pipeline jobs after URL input
   - Can still run CLI independently if needed

## Current System Understanding

The existing system:
- CLI-based: `python -m src.main "<youtube_url>"`
- Stores data in JSON files: `storage/data/{year-month}/{video_id}.json`
- Stores videos in: `storage/videos/{year-month}/`
- Stores subtitles in: `storage/subtitles/{year-month}/`
- Logging: Uses Python logger to `storage/logs/`

## Success Criteria

Once clarified, the success criteria will be:
- [ ] User can submit YouTube URLs through web interface
- [ ] User can view real-time progress of running jobs
- [ ] User can view history of all processed videos
- [ ] User can view detailed information for each job
- [ ] System is reliable and handles errors gracefully
- [ ] UI is intuitive and responsive

---

**Status**: Awaiting user clarification on questions above before proceeding to design phase.
